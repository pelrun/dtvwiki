---
title: VSFReanimator
permalink: VSFReanimator
---

About vsfReanimator
===================

vsfReanimator converts a VICE snapshot (.vsf) to a .prg file that can be
started on the DTV. Since it uses VICE's internal snapshot data as
input, it can even restore SID registers (which is impossible for C64
freezers since SID registers can't be read). Since the generated .prg
files are bigger than 64k they cannot be loaded from floppy using
standard LOAD routines. See
[here](DTV_Version_2/3#Some_games_from_Spiff.27s_Repository_fail_to_run_properly._Why_is_that.3F "wikilink")
for details.

Status
------

For current code see
[SVN](http://viceplus.svn.sourceforge.net/viewvc/viceplus/trunk/tools/vsfReanimator/).
If you find any program that does not unfreeze properly please [contact
me](Special:Emailuser/1570 "wikilink").

Webfrontend
-----------

There is a **[webfrontend](http://dtvforge.ath.cx/vsfReanimator/)** for
converting .vsfs. Just upload the .vsf and get the .prg back.

A special feature is that arbitrary data can be included in the .prg to
go into upper mem ($010000 and up). This can be used for including file
system images (see [Fixing Games for the DTV Example:
Armalyte](Fixing_Games_for_the_DTV_Example:_Armalyte "wikilink") for an
example).

dtvDexomizer decompressor
=========================

A DTV version of an [Exomizer](http://hem.bredband.net/magli143/exo/)
decruncher that can handle .prgs larger than 202 blocks (such as
generated by vsfReanimator) can be found in SVN. It uses the DTV2's
skip+burst mode and decompresses a lot faster than standard “exomizer
sfx” that is not DTV aware and thus does not enable skip+burst. It is a
bit less optimized than exomizer sfx concerning space efficiency though.

Status
------

For current code see
[SVN](http://viceplus.svn.sourceforge.net/viewvc/viceplus/trunk/tools/vsfReanimator/).

To run it, you need to...

-   compile *segcrunch.c* using gcc (helper by tlr - breaks the file to
    compress in segments and calls exomizer on these chunks)
-   compile *exodecrunch.asm* to *decompressor.prg* using acme (?) (will
    be read by dtvDexomizer.php)
-   run *php dtvDexomizer.php input.prg &gt; result.prg* - for other
    parameters see the PHP file.

Another Exomizer decompressor with better performance is included in the
[TRSI demo kernal](http://noname.c64.org/csdb/release/?id=63115). Anyone
to adapt this for dtvDexomizer?

Compressor benchmarks
---------------------

**Size**

`mayhem-dtv.prg`  
`uncompressed:          207K`  
`DTV Flash compressed:  131K`  
`Exomizer, 16k chunks:  104K`  
`Exomizer, 16k offset:  103K`  
`GZip:                  101K`  
`BZip2:                 101K`  
`Exomizer, 32k chunks:  101K (= dtvDexomizer segcrunch)`  
`Exomizer, 48k chunks:  100K`  
`Exomizer, 32k offset:   96K`  
`Exomizer, 48k offset:   94K`  
`Exomizer, continuous:   92K`

**Speed**

`62K test file, compressed to 32K`  
`Exomizer SFX:            9,6sec (= 6,4K/sec)`  
`Exomizer SFX, s+b        4,3sec (= 14,4K/sec)`  
  
`Mayhem-dtv.prg (207K uncompressed)`  
`dtvDexomizer segcrunch  14,3sec (= 14,5K/sec)`  
`DTV Flash load:          9,8sec (= 21,1K/sec)`  
`DTV Flash load, s+b:     5,9sec (= 35,1K/sec)`
